<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ServiceNow Virtual Agent - Test Page</title>

    <!-- External CSS -->
    <link rel="stylesheet" href="style.css">

    <!-- ServiceNow Virtual Agent Portable Web Client -->
    <script type="module">
        import ServiceNowChat from "https://blueshipcoltddemo4.service-now.com/uxasset/externals/now-requestor-chat-popover-app/index.jsdbx?sysparm_substitute=false";

        // チャットインスタンスを作成して初期化
        const chat = new ServiceNowChat({
            instance: "https://blueshipcoltddemo4.service-now.com/",
            // オプション設定（必要に応じてカスタマイズ）
            context: {
                skip_load_history: 1
            },
            branding: {
                bgColor: '#667eea',
                primaryColor: '#ffffff',
                hoverColor: '#764ba2',
                activeColor: '#5568d3',
            },
            offsetX: 20,
            offsetY: 20,
            position: 'right',
        });
    </script>
</head>
<body>
    <div class="container">
        <h1>ServiceNow Virtual Agent</h1>
        <p class="subtitle">Portable Web Client - テストページ</p>

        <div class="info-box">
            <h2>このテストページについて</h2>
            <p>
                このページは、ServiceNow Virtual Agentの<strong>Portable Web Client</strong>が実装されています。
            </p>
            <p>
                <strong>実装状況：</strong> blueshipcoltddemo4.service-now.com インスタンスのチャットウィジェットが画面右下に表示されます（CORS設定が完了している場合）。
            </p>
        </div>

        <div class="config-section">
            <h3>実装済みコード</h3>
            <p style="color: #333; margin-bottom: 15px;">
                このページには既に以下のコードが実装されています（&lt;head&gt;セクション内）：
            </p>
            <pre>&lt;script type="module"&gt;
    import ServiceNowChat from "https://blueshipcoltddemo4.service-now.com/uxasset/externals/now-requestor-chat-popover-app/index.jsdbx?sysparm_substitute=false";

    const chat = new ServiceNowChat({
        instance: "https://blueshipcoltddemo4.service-now.com/",
        context: {
            skip_load_history: 1
        },
        branding: {
            bgColor: '#667eea',
            primaryColor: '#ffffff',
            hoverColor: '#764ba2',
            activeColor: '#5568d3',
        },
        offsetX: 20,
        offsetY: 20,
        position: 'right',
    });
&lt;/script&gt;</pre>
            <p style="color: #333; margin-top: 15px;">
                <strong>ポイント：</strong> <code>type="module"</code> を使用してES6モジュールとしてインポートし、
                <code>new ServiceNowChat()</code> でチャットインスタンスを作成します。
            </p>
        </div>

        <div class="note">
            <p>
                <strong>注意:</strong> チャットウィジェットを表示するには、ServiceNowインスタンス側でCORS設定とPortable Web Clientの有効化が必要です。
            </p>
        </div>

        <div class="info-box">
            <h2>カスタマイズ設定</h2>
            <p>
                実装コード内の<code>branding</code>オブジェクトで色やサイズ、<code>position</code>で表示位置を調整できます。
            </p>
        </div>

        <footer>
            <p>ServiceNow Virtual Agent Portable Web Client - Test Page</p>
            <p style="margin-top: 10px; font-size: 0.85em;">GitHub Pages でホスティング</p>
        </footer>
    </div>

</body>
</html>
