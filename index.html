<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ServiceNow Virtual Agent - Test Page</title>

    <!-- ServiceNow Virtual Agent Portable Web Client -->
    <script type="module">
        import ServiceNowChat from "https://blueshipcoltddemo4.service-now.com/uxasset/externals/now-requestor-chat-popover-app/index.jsdbx?sysparm_substitute=false";

        // チャットインスタンスを作成して初期化
        const chat = new ServiceNowChat({
            instance: "https://blueshipcoltddemo4.service-now.com/",
            // オプション設定（必要に応じてカスタマイズ）
            context: {
                skip_load_history: 1
            },
            branding: {
                bgColor: '#667eea',
                primaryColor: '#ffffff',
                hoverColor: '#764ba2',
                activeColor: '#5568d3',
            },
            offsetX: 20,
            offsetY: 20,
            position: 'right',
        });
    </script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            padding: 40px;
            max-width: 900px;
            margin: 40px auto;
        }

        h1 {
            color: #333;
            margin-bottom: 10px;
            font-size: 2.5em;
        }

        .subtitle {
            color: #666;
            margin-bottom: 30px;
            font-size: 1.1em;
        }

        .info-box {
            background: #f8f9fa;
            border-left: 4px solid #667eea;
            padding: 20px;
            margin: 20px 0;
            border-radius: 4px;
        }

        .info-box h2 {
            color: #667eea;
            margin-bottom: 10px;
            font-size: 1.3em;
        }

        .info-box p {
            color: #555;
            line-height: 1.6;
            margin-bottom: 10px;
        }

        .info-box code {
            background: #e9ecef;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
            color: #d63384;
            font-size: 0.9em;
        }

        .info-box ul {
            margin-left: 20px;
            color: #555;
        }

        .info-box li {
            margin-bottom: 8px;
            line-height: 1.6;
        }

        .config-section {
            background: #e7f3ff;
            border: 1px solid #2196F3;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }

        .config-section h3 {
            color: #1976D2;
            margin-bottom: 15px;
        }

        .config-section pre {
            background: #263238;
            color: #aed581;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            font-size: 0.9em;
            line-height: 1.5;
        }

        footer {
            margin-top: 40px;
            text-align: center;
            color: #999;
            font-size: 0.9em;
            padding-bottom: 20px;
        }

        .note {
            background: #fff9e6;
            border-left: 4px solid #ff9800;
            padding: 15px;
            margin: 15px 0;
            border-radius: 4px;
        }

        .note p {
            color: #663c00;
            margin: 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ServiceNow Virtual Agent</h1>
        <p class="subtitle">Portable Web Client - テストページ</p>

        <div class="info-box">
            <h2>このテストページについて</h2>
            <p>
                このページは、ServiceNow Virtual Agentの<strong>Portable Web Client</strong>が実装されています。
            </p>
            <p>
                <strong>実装状況：</strong> blueshipcoltddemo4.service-now.com インスタンスのチャットウィジェットが画面右下に表示されます（CORS設定が完了している場合）。
            </p>
        </div>

        <div class="config-section">
            <h3>実装済みコード</h3>
            <p style="color: #333; margin-bottom: 15px;">
                このページには既に以下のコードが実装されています（&lt;head&gt;セクション内）：
            </p>
            <pre>&lt;script type="module"&gt;
    import ServiceNowChat from "https://blueshipcoltddemo4.service-now.com/uxasset/externals/now-requestor-chat-popover-app/index.jsdbx?sysparm_substitute=false";

    const chat = new ServiceNowChat({
        instance: "https://blueshipcoltddemo4.service-now.com/",
        context: {
            skip_load_history: 1
        },
        branding: {
            bgColor: '#667eea',
            primaryColor: '#ffffff',
            hoverColor: '#764ba2',
            activeColor: '#5568d3',
        },
        offsetX: 20,
        offsetY: 20,
        position: 'right',
    });
&lt;/script&gt;</pre>
            <p style="color: #333; margin-top: 15px;">
                <strong>ポイント：</strong> <code>type="module"</code> を使用してES6モジュールとしてインポートし、
                <code>new ServiceNowChat()</code> でチャットインスタンスを作成します。
            </p>
        </div>

        <div class="note">
            <p>
                <strong>注意:</strong> チャットウィジェットを表示するには、ServiceNowインスタンス側でCORS設定とPortable Web Clientの有効化が必要です。
            </p>
        </div>

        <div class="info-box">
            <h2>カスタマイズ設定</h2>
            <p>
                実装コード内の<code>branding</code>オブジェクトで色やサイズ、<code>position</code>で表示位置を調整できます。
            </p>
        </div>

        <footer>
            <p>ServiceNow Virtual Agent Portable Web Client - Test Page</p>
            <p style="margin-top: 10px; font-size: 0.85em;">GitHub Pages でホスティング</p>
        </footer>
    </div>

</body>
</html>
